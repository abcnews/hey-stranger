const { h } = require('preact');
const { withContext } = require('../AppContext');
const styles = require('./styles.css').default;

const Meta = ({ isInteractive, meta }) => {
  const { title, bylineHTML, infoSource, infoSourceURL, standfirst, misc } = meta;

  return (
    <header className={styles.root}>
      <div className={styles.title} role="heading" aria-level="1">
        <span>{title}</span>
        <svg role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 656 72">
          <path d="M.325 1h12v28.9h18.5V1h12v70h-12V40.1h-18.5V71h-12V1zm60.5 0h34.1l-1.2 10.2h-20.9v18.5h20.1v10.2h-20.1v20.8h22.2V71h-34.2V1zm45.8 0h11.9l11.4 31.3h.4l11.8-31.3h12l-17.9 44.5V71h-12V45.5L106.625 1zm82.3 49.8l12-2.7c.2 8.7 3.1 12.4 8.9 12.6 5.9.2 8.9-3.6 8.9-9.6 0-15.2-27.9-9.4-27.9-32.3 0-12.8 9.8-18.6 21.2-18.2 10.4.4 17.4 4.5 19.4 18.7l-11.9 2.7c-.4-7-3-10.7-8.2-10.9-5.4-.2-8.5 2.4-8.6 7.5-.4 13.8 28.6 9.2 28.6 31.8 0 11.7-7.7 21.1-21.8 21.1-13.1 0-20.2-7.5-20.6-20.7zm54.8-49.8h40.9l-1 10.2h-13.5V71h-12V11.2h-14.4V1zm85.4 41.6l10.9 28.4h-11.8l-9.6-25.7h-8.2V71h-12V1h20.1c11.1 0 19.9 7 19.7 22.3-.1 9.8-3.6 16-9.1 19.3zm-18.7-31.4V35h7.3c6.6 0 8.1-4.7 8.3-12 .1-6.7-1.6-11.8-7.9-11.8h-7.7zm58.3-10.2h14.1l18.8 70h-12.3l-4.6-16.9h-17.8l-4.6 16.9h-12.3l18.7-70zm6.8 16l-5.9 26.9h12.3l-5.8-26.9h-.6zm39.4-16h12.2l20 47.5h.7l-.3-20.4V1h11.6v70h-12.8l-19.4-46.5h-.9l.5 20.5v26h-11.6V1zm104.5 18.4l-11.9 2.7c-1-7.8-4.1-11.3-9.1-11.3-7 0-10.8 5.2-10.8 17.7v15c0 12.9 4.2 17.7 11 17.8 7.2.1 9.9-3.4 9.9-3.4V44.1h-11.2l.1-10.2h21.9V64s-7.4 7.6-20.7 7.6c-12.4 0-23-5.8-23-28.3V28.7c0-22.3 11.7-28.4 22.8-28.4 9.1 0 18.8 4.1 21 19.1zm17.9-18.4h34.1l-1.2 10.2h-20.9v18.5h20.1v10.2h-20.1v20.8h22.2V71h-34.2V1zm80.4 41.6l10.9 28.4h-11.8l-9.6-25.7h-8.2V71h-12V1h20.1c11.1 0 19.9 7 19.7 22.3-.1 9.8-3.6 16-9.1 19.3zm-18.7-31.4V35h7.3c6.6 0 8.1-4.7 8.3-12 .1-6.7-1.6-11.8-7.9-11.8h-7.7zm43.4-10.2h12.6l-1.5 46.6h-9.7l-1.4-46.6zm-.7 63c0-3.9 3.2-7.1 7.1-7.1 3.9 0 7.1 3.2 7.1 7.1 0 3.9-3.2 7.1-7.1 7.1-3.9 0-7.1-3.2-7.1-7.1z" />
        </svg>
        <svg role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 424 23">
          <path d="M.038 2.4h2.52L6.87 19.2h.112l4.172-16.8h2.464l4.424 16.8h.084l4.116-16.8h2.52L19.61 22h-2.912L12.414 6.404 8.27 22H5.358L.038 2.4zm32.28 0h2.38v8.596h9.492V2.4h2.38V22h-2.38v-8.904h-9.492V22h-2.38V2.4zm29.256 0h3.136L71.878 22h-2.52l-1.848-5.208h-8.876L56.786 22h-2.492l7.28-19.6zm1.428 2.66l-3.64 9.716h7.42L63.226 5.06h-.224zM76.55 2.4h13.832l-.168 1.96h-5.572V22h-2.408V4.36H76.55V2.4zm22.62 1.428c0-.392-.56-.476-.56-.476-.896.028-1.456-.644-1.428-1.428.028-.756.644-1.372 1.484-1.372 1.652 0 2.268 1.4 2.128 2.94-.196 2.044-1.82 3.192-3.92 3.22V5.536c1.372 0 2.296-.812 2.296-1.708zm21.976.168l-.924 1.876s-3.024-1.624-5.768-1.624c-2.464 0-4.228.728-4.228 2.856 0 4.592 11.368 2.576 11.368 9.212-.028 3.836-3.108 5.852-7.224 5.852-4.564 0-7.336-2.296-7.336-2.296l1.232-1.848s2.548 2.128 6.048 2.128c2.968 0 4.844-1.484 4.872-3.612 0-4.648-11.368-2.912-11.368-9.268.028-3.36 2.632-5.012 6.608-5.012 3.5 0 6.72 1.736 6.72 1.736zm26.704-1.764c4.564 0 8.372 3.136 8.372 9.884 0 5.544-2.688 10.052-8.372 10.052-5.712 0-8.4-4.508-8.4-10.052 0-6.748 3.78-9.884 8.4-9.884zm-.028 2.016c-3.304 0-5.992 2.352-5.992 7.952 0 4.116 1.456 7.896 5.992 7.896s6.02-3.78 6.02-7.896c0-5.6-2.688-7.952-6.02-7.952zm16.74-1.848h2.996l9.716 16.212V2.4h2.38V22h-3.08l-9.632-16.016V22h-2.38V2.4zm33.172 0h2.772l5.068 9.8h.112l5.264-9.8h2.744l-6.832 12.124V22h-2.38v-7.476L197.734 2.4zm30.18-.168c4.564 0 8.372 3.136 8.372 9.884 0 5.544-2.688 10.052-8.372 10.052-5.712 0-8.4-4.508-8.4-10.052 0-6.748 3.78-9.884 8.4-9.884zm-.028 2.016c-3.304 0-5.992 2.352-5.992 7.952 0 4.116 1.456 7.896 5.992 7.896s6.02-3.78 6.02-7.896c0-5.6-2.688-7.952-6.02-7.952zM244.514 2.4h2.38v12.348c0 3.472 1.792 5.376 4.9 5.376 3.164 0 4.872-1.932 4.872-5.376V2.4h2.38v12.236c0 5.348-3.164 7.532-7.252 7.532-4.116 0-7.28-2.24-7.28-7.476V2.4zm23.544 0h6.58c3.864 0 6.972 1.932 6.888 6.16-.056 2.828-1.568 4.676-3.808 5.544L282.002 22h-2.772l-3.78-7.392c-.42.084-1.092.112-1.568.112h-3.444V22h-2.38V2.4zm2.38 1.96v8.372h3.864c3.08 0 4.788-1.764 4.844-4.256.056-2.38-1.372-4.116-4.592-4.116h-4.116zM300.53 2.4h6.16c3.864 0 6.888 1.96 6.888 6.244 0 4.648-3.08 6.244-6.888 6.244h-3.78V22h-2.38V2.4zm2.38 1.96v8.512h3.808c2.884 0 4.508-1.428 4.508-4.312 0-2.38-1.4-4.2-4.62-4.2h-3.696zm18.42-1.96h2.38v8.596h9.492V2.4h2.38V22h-2.38v-8.904h-9.492V22h-2.38V2.4zm30.992-.168c4.564 0 8.372 3.136 8.372 9.884 0 5.544-2.688 10.052-8.372 10.052-5.712 0-8.4-4.508-8.4-10.052 0-6.748 3.78-9.884 8.4-9.884zm-.028 2.016c-3.304 0-5.992 2.352-5.992 7.952 0 4.116 1.456 7.896 5.992 7.896s6.02-3.78 6.02-7.896c0-5.6-2.688-7.952-6.02-7.952zm16.74-1.848h2.996l9.716 16.212V2.4h2.38V22h-3.08l-9.632-16.016V22h-2.38V2.4zm24.244 0h11.396l-.28 1.96h-8.736v6.524h8.316v1.988h-8.316v7.112h9.072V22h-11.452V2.4zm20.24 5.768l-2.072-.924s.504-4.956 6.356-4.956c3.892 0 6.104 2.296 6.104 5.572 0 2.996-1.988 5.852-5.572 6.132v2.24h-2.184v-3.696h.924c3.276-.112 4.62-2.324 4.62-4.564 0-2.436-1.456-3.752-3.892-3.752-4.228 0-4.284 3.948-4.284 3.948zm3.612 10.836c.84 0 1.54.7 1.54 1.484 0 .812-.7 1.512-1.54 1.512-.812 0-1.484-.7-1.484-1.512 0-.784.672-1.484 1.484-1.484z" />
        </svg>
      </div>
      {(bylineHTML || infoSource) && (
        <div>
          {bylineHTML && (
            <div
              className={styles.byline}
              dangerouslySetInnerHTML={{
                __html: bylineHTML.replace(/(<a )/g, isInteractive ? '$1' : '$1tabindex="-1" ')
              }}
            />
          )}
          {infoSource && (
            <div className={styles.infoSource}>
              {infoSourceURL ? (
                <a tabindex={isInteractive ? 0 : -1} href={infoSourceURL}>
                  {infoSource}
                </a>
              ) : (
                infoSource
              )}
            </div>
          )}
        </div>
      )}
      {standfirst && <p className={styles.standfirst}>{standfirst}</p>}
      {misc.length && <p className={styles.misc} dangerouslySetInnerHTML={{ __html: misc.join('<br/>') }} />}
    </header>
  );
};

Meta.displayName = 'Meta';

module.exports = withContext(Meta);
