const { h } = require('preact');
const { withContext } = require('../AppContext');
const styles = require('./styles.css');

const Meta = ({ isInteractive, meta }) => {
  const { title, bylineHTML, infoSource, infoSourceURL, standfirst } = meta;

  return (
    <header className={styles.root}>
      <div className={styles.title} role="heading" aria-level="1">
        <span>{title}</span>
        <svg role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 656 72">
          <path d="M.325 1h12v28.9h18.5V1h12v70h-12V40.1h-18.5V71h-12V1zm60.5 0h34.1l-1.2 10.2h-20.9v18.5h20.1v10.2h-20.1v20.8h22.2V71h-34.2V1zm45.8 0h11.9l11.4 31.3h.4l11.8-31.3h12l-17.9 44.5V71h-12V45.5L106.625 1zm82.3 49.8l12-2.7c.2 8.7 3.1 12.4 8.9 12.6 5.9.2 8.9-3.6 8.9-9.6 0-15.2-27.9-9.4-27.9-32.3 0-12.8 9.8-18.6 21.2-18.2 10.4.4 17.4 4.5 19.4 18.7l-11.9 2.7c-.4-7-3-10.7-8.2-10.9-5.4-.2-8.5 2.4-8.6 7.5-.4 13.8 28.6 9.2 28.6 31.8 0 11.7-7.7 21.1-21.8 21.1-13.1 0-20.2-7.5-20.6-20.7zm54.8-49.8h40.9l-1 10.2h-13.5V71h-12V11.2h-14.4V1zm85.4 41.6l10.9 28.4h-11.8l-9.6-25.7h-8.2V71h-12V1h20.1c11.1 0 19.9 7 19.7 22.3-.1 9.8-3.6 16-9.1 19.3zm-18.7-31.4V35h7.3c6.6 0 8.1-4.7 8.3-12 .1-6.7-1.6-11.8-7.9-11.8h-7.7zm58.3-10.2h14.1l18.8 70h-12.3l-4.6-16.9h-17.8l-4.6 16.9h-12.3l18.7-70zm6.8 16l-5.9 26.9h12.3l-5.8-26.9h-.6zm39.4-16h12.2l20 47.5h.7l-.3-20.4V1h11.6v70h-12.8l-19.4-46.5h-.9l.5 20.5v26h-11.6V1zm104.5 18.4l-11.9 2.7c-1-7.8-4.1-11.3-9.1-11.3-7 0-10.8 5.2-10.8 17.7v15c0 12.9 4.2 17.7 11 17.8 7.2.1 9.9-3.4 9.9-3.4V44.1h-11.2l.1-10.2h21.9V64s-7.4 7.6-20.7 7.6c-12.4 0-23-5.8-23-28.3V28.7c0-22.3 11.7-28.4 22.8-28.4 9.1 0 18.8 4.1 21 19.1zm17.9-18.4h34.1l-1.2 10.2h-20.9v18.5h20.1v10.2h-20.1v20.8h22.2V71h-34.2V1zm80.4 41.6l10.9 28.4h-11.8l-9.6-25.7h-8.2V71h-12V1h20.1c11.1 0 19.9 7 19.7 22.3-.1 9.8-3.6 16-9.1 19.3zm-18.7-31.4V35h7.3c6.6 0 8.1-4.7 8.3-12 .1-6.7-1.6-11.8-7.9-11.8h-7.7zm43.4-10.2h12.6l-1.5 46.6h-9.7l-1.4-46.6zm-.7 63c0-3.9 3.2-7.1 7.1-7.1 3.9 0 7.1 3.2 7.1 7.1 0 3.9-3.2 7.1-7.1 7.1-3.9 0-7.1-3.2-7.1-7.1z" />
        </svg>
        <svg role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 518 24">
          <path d="M.812 2h2.7l4.62 18h.12l4.47-18h2.64l4.74 18h.09l4.41-18h2.7l-5.52 21h-3.12l-4.59-16.71L9.632 23h-3.12L.812 2zm36.616 0h2.55v9.21h10.17V2h2.55v21h-2.55v-9.54h-10.17V23h-2.55V2zm33.375 0h3.36l7.68 21h-2.7l-1.98-5.58h-9.51L65.673 23h-2.67l7.8-21zm1.53 2.85l-3.9 10.41h7.95l-3.81-10.41h-.24zM88.88 2h14.82l-.18 2.1h-5.97V23h-2.58V4.1h-6.09V2zm26.266 1.53c0-.42-.6-.51-.6-.51-.96.03-1.56-.69-1.53-1.53.03-.81.69-1.47 1.59-1.47 1.77 0 2.43 1.5 2.28 3.15-.21 2.19-1.95 3.42-4.2 3.45V5.36c1.47 0 2.46-.87 2.46-1.83zm25.576.18l-.99 2.01s-3.24-1.74-6.18-1.74c-2.64 0-4.53.78-4.53 3.06 0 4.92 12.18 2.76 12.18 9.87-.03 4.11-3.33 6.27-7.74 6.27-4.89 0-7.86-2.46-7.86-2.46l1.32-1.98s2.73 2.28 6.48 2.28c3.18 0 5.19-1.59 5.22-3.87 0-4.98-12.18-3.12-12.18-9.93.03-3.6 2.82-5.37 7.08-5.37 3.75 0 7.2 1.86 7.2 1.86zm32.671-1.89c4.89 0 8.97 3.36 8.97 10.59 0 5.94-2.88 10.77-8.97 10.77-6.12 0-9-4.83-9-10.77 0-7.23 4.05-10.59 9-10.59zm-.03 2.16c-3.54 0-6.42 2.52-6.42 8.52 0 4.41 1.56 8.46 6.42 8.46 4.86 0 6.45-4.05 6.45-8.46 0-6-2.88-8.52-6.45-8.52zM193.328 2h3.21l10.41 17.37V2h2.55v21h-3.3l-10.32-17.16V23h-2.55V2zm39.602 0h2.97l5.43 10.5h.12L247.09 2h2.94l-7.32 12.99V23h-2.55v-8.01L232.93 2zm34.366-.18c4.89 0 8.97 3.36 8.97 10.59 0 5.94-2.88 10.77-8.97 10.77-6.12 0-9-4.83-9-10.77 0-7.23 4.05-10.59 9-10.59zm-.03 2.16c-3.54 0-6.42 2.52-6.42 8.52 0 4.41 1.56 8.46 6.42 8.46 4.86 0 6.45-4.05 6.45-8.46 0-6-2.88-8.52-6.45-8.52zM287.11 2h2.55v13.23c0 3.72 1.92 5.76 5.25 5.76 3.39 0 5.22-2.07 5.22-5.76V2h2.55v13.11c0 5.73-3.39 8.07-7.77 8.07-4.41 0-7.8-2.4-7.8-8.01V2zm27.256 0h7.05c4.14 0 7.47 2.07 7.38 6.6-.06 3.03-1.68 5.01-4.08 5.94l4.59 8.46h-2.97l-4.05-7.92c-.45.09-1.17.12-1.68.12h-3.69V23h-2.55V2zm2.55 2.1v8.97h4.14c3.3 0 5.13-1.89 5.19-4.56.06-2.55-1.47-4.41-4.92-4.41h-4.41zm50.222-.39l-.99 2.01s-3.24-1.74-6.18-1.74c-2.64 0-4.53.78-4.53 3.06 0 4.92 12.18 2.76 12.18 9.87-.03 4.11-3.33 6.27-7.74 6.27-4.89 0-7.86-2.46-7.86-2.46l1.32-1.98s2.73 2.28 6.48 2.28c3.18 0 5.19-1.59 5.22-3.87 0-4.98-12.18-3.12-12.18-9.93.03-3.6 2.82-5.37 7.08-5.37 3.75 0 7.2 1.86 7.2 1.86zm27.975 3.39c-.39.18-1.83.87-2.13 1.05-.87-2.58-2.94-4.17-5.94-4.17-3.75 0-6.87 2.52-6.87 8.43 0 4.59 2.1 8.58 6.78 8.58 2.67 0 4.92-1.41 6.06-3.87l2.16 1.05c-1.65 3.24-4.77 5.07-8.43 5.01-5.94-.09-9.12-4.59-9.12-10.65 0-7.23 4.26-10.62 9.3-10.68 3.75-.06 6.99 1.92 8.19 5.25zM405.75 2h7.05c4.14 0 7.47 2.07 7.38 6.6-.06 3.03-1.68 5.01-4.08 5.94l4.59 8.46h-2.97l-4.05-7.92c-.45.09-1.17.12-1.68.12h-3.69V23h-2.55V2zm2.55 2.1v8.97h4.14c3.3 0 5.13-1.89 5.19-4.56.06-2.55-1.47-4.41-4.92-4.41h-4.41zM431.416 2h12.21l-.3 2.1h-9.36v6.99h8.91v2.13h-8.91v7.62h9.72V23h-12.27V2zm22.966 0h12.21l-.3 2.1h-9.36v6.99h8.91v2.13h-8.91v7.62h9.72V23h-12.27V2zm22.966 0h3.21l10.41 17.37V2h2.55v21h-3.3l-10.32-17.16V23h-2.55V2zm28.755 6.18l-2.22-.99s.54-5.31 6.81-5.31c4.17 0 6.54 2.46 6.54 5.97 0 3.21-2.13 6.27-5.97 6.57v2.4h-2.34v-3.96h.99c3.51-.12 4.95-2.49 4.95-4.89 0-2.61-1.56-4.02-4.17-4.02-4.53 0-4.59 4.23-4.59 4.23zm3.87 11.61c.9 0 1.65.75 1.65 1.59 0 .87-.75 1.62-1.65 1.62-.87 0-1.59-.75-1.59-1.62 0-.84.72-1.59 1.59-1.59z" />
        </svg>
      </div>
      {(bylineHTML || infoSource) && (
        <div>
          {bylineHTML && (
            <div
              className={styles.byline}
              dangerouslySetInnerHTML={{
                __html: bylineHTML.replace(/(<a )/g, isInteractive ? '$1' : '$1tabindex="-1" ')
              }}
            />
          )}
          {infoSource && (
            <div className={styles.infoSource}>
              {infoSourceURL ? (
                <a tabindex={isInteractive ? 0 : -1} href={infoSourceURL}>
                  {infoSource}
                </a>
              ) : (
                infoSource
              )}
            </div>
          )}
        </div>
      )}
      {standfirst && <p className={styles.standfirst}>{standfirst}</p>}
    </header>
  );
};

Meta.displayName = 'Meta';

module.exports = withContext(Meta);
